Homework 2
================
Wenxin Tian
2023-09-30

``` r
library(tidyverse)
library(readxl)
```

## Problem 1

Importing and cleaning pol-months.csv dataset:

``` r
month_names = c("Jan","Feb","Mar",
                "Apr","May","Jun",
                "Jul","Aug","Sep",
                "Oct","Nov","Dec")

pols_df = 
  read_csv("data/pols-month.csv") |>
  janitor::clean_names() |>
  separate(mon, into = c('year', 'month', 'day'), '-') |>  # separate into year, month, and day
  mutate(year = as.numeric(year)) |>
  mutate(month = as.numeric(month)) |> 
  mutate(month = month_names[month]) |>                    # changing month num to month name
  mutate(                                                  # adding president variable
    president = case_match(
      prez_gop,
      1 ~ 'gop',
      0 ~ 'dem'
    )) |> 
  relocate(president, .after = month) |>                   # relocating president variable  
  select(-c(prez_dem, prez_gop, day))                      # removing prez_dem, prez_gop, and day variables
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_df
```

    ## # A tibble: 822 × 9
    ##     year month president gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##    <dbl> <chr> <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1  1947 Jan   dem            23      51     253      23      45     198
    ##  2  1947 Feb   dem            23      51     253      23      45     198
    ##  3  1947 Mar   dem            23      51     253      23      45     198
    ##  4  1947 Apr   dem            23      51     253      23      45     198
    ##  5  1947 May   dem            23      51     253      23      45     198
    ##  6  1947 Jun   dem            23      51     253      23      45     198
    ##  7  1947 Jul   dem            23      51     253      23      45     198
    ##  8  1947 Aug   dem            23      51     253      23      45     198
    ##  9  1947 Sep   dem            23      51     253      23      45     198
    ## 10  1947 Oct   dem            23      51     253      23      45     198
    ## # ℹ 812 more rows

Importing and cleaning snp.csv dataset:

``` r
snp_df = 
  read_csv("data/snp.csv") |>
  janitor::clean_names() |>
  separate(date, into = c('month', 'day', 'year'), '/') |>
  mutate(
    month = as.numeric(month),
    month = month_names[month],
    year = as.numeric(year) + 2000
  ) |>
  select(-day) |>
  arrange(year, month) |>
  relocate(month) |>
  relocate(year)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df
```

    ## # A tibble: 787 × 3
    ##     year month close
    ##    <dbl> <chr> <dbl>
    ##  1  2000 Apr   1452.
    ##  2  2000 Aug   1518.
    ##  3  2000 Dec   1320.
    ##  4  2000 Feb   1366.
    ##  5  2000 Jan   1394.
    ##  6  2000 Jul   1431.
    ##  7  2000 Jun   1455.
    ##  8  2000 Mar   1499.
    ##  9  2000 May   1421.
    ## 10  2000 Nov   1315.
    ## # ℹ 777 more rows

Importing and cleaning unemployment.csv:

``` r
unemployment_df =
  read_csv("data/unemployment.csv") |>
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment_rate"
  ) |>
  janitor::clean_names()
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_df
```

    ## # A tibble: 816 × 3
    ##     year month unemployment_rate
    ##    <dbl> <chr>             <dbl>
    ##  1  1948 Jan                 3.4
    ##  2  1948 Feb                 3.8
    ##  3  1948 Mar                 4  
    ##  4  1948 Apr                 3.9
    ##  5  1948 May                 3.5
    ##  6  1948 Jun                 3.6
    ##  7  1948 Jul                 3.6
    ##  8  1948 Aug                 3.9
    ##  9  1948 Sep                 3.8
    ## 10  1948 Oct                 3.7
    ## # ℹ 806 more rows

Merging the 3 datasets together:

``` r
result =
  left_join(pols_df, snp_df) |>
  left_join(unemployment_df)
```

    ## Joining with `by = join_by(year, month)`
    ## Joining with `by = join_by(year, month)`

``` r
result
```

    ## # A tibble: 822 × 11
    ##     year month president gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem close
    ##    <dbl> <chr> <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <dbl>
    ##  1  1947 Jan   dem            23      51     253      23      45     198    NA
    ##  2  1947 Feb   dem            23      51     253      23      45     198    NA
    ##  3  1947 Mar   dem            23      51     253      23      45     198    NA
    ##  4  1947 Apr   dem            23      51     253      23      45     198    NA
    ##  5  1947 May   dem            23      51     253      23      45     198    NA
    ##  6  1947 Jun   dem            23      51     253      23      45     198    NA
    ##  7  1947 Jul   dem            23      51     253      23      45     198    NA
    ##  8  1947 Aug   dem            23      51     253      23      45     198    NA
    ##  9  1947 Sep   dem            23      51     253      23      45     198    NA
    ## 10  1947 Oct   dem            23      51     253      23      45     198    NA
    ## # ℹ 812 more rows
    ## # ℹ 1 more variable: unemployment_rate <dbl>

## Problem 2

Importing and cleaning the Mr. Trash Wheel dataset:

``` r
mrtrashwheel_df =
  read_excel(
    "data/trashwheel.xlsx",
    sheet = 1,
    range = "A2:N549") |>
  janitor::clean_names() |>
  mutate(year = as.numeric(year))
```

Calculating `homes_powered` variable based on note:

- Homes Powered - Each ton of trash equates to on average 500 kilowatts
  of electricity. An average household will use 30 kilowatts per day.

``` r
mrtrashwheel_df =
  mutate(
    mrtrashwheel_df,
    homes_powered = weight_tons * 500 / 30
  )

mrtrashwheel_df
```

    ## # A tibble: 547 × 14
    ##    dumpster month  year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr> <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 May    2014 2014-05-16 00:00:00        4.31                 18
    ##  2        2 May    2014 2014-05-16 00:00:00        2.74                 13
    ##  3        3 May    2014 2014-05-16 00:00:00        3.45                 15
    ##  4        4 May    2014 2014-05-17 00:00:00        3.1                  15
    ##  5        5 May    2014 2014-05-17 00:00:00        4.06                 18
    ##  6        6 May    2014 2014-05-20 00:00:00        2.71                 13
    ##  7        7 May    2014 2014-05-21 00:00:00        1.91                  8
    ##  8        8 May    2014 2014-05-28 00:00:00        3.7                  16
    ##  9        9 June   2014 2014-06-05 00:00:00        2.52                 14
    ## 10       10 June   2014 2014-06-11 00:00:00        3.76                 18
    ## # ℹ 537 more rows
    ## # ℹ 8 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, grocery_bags <dbl>,
    ## #   chip_bags <dbl>, sports_balls <dbl>, homes_powered <dbl>

Same process for Professor Trash Wheel and Gwynnda:

``` r
professor_df =
  read_excel(
    "data/trashwheel.xlsx",
    sheet = 2,
    range = "A2:M96") |>
  janitor::clean_names() |>
  mutate(homes_powered = weight_tons * 500 / 30)

professor_df
```

    ## # A tibble: 94 × 13
    ##    dumpster month     year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>    <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 January   2017 2017-01-02 00:00:00        1.79                 15
    ##  2        2 January   2017 2017-01-30 00:00:00        1.58                 15
    ##  3        3 February  2017 2017-02-26 00:00:00        2.32                 18
    ##  4        4 February  2017 2017-02-26 00:00:00        3.72                 15
    ##  5        5 February  2017 2017-02-28 00:00:00        1.45                 15
    ##  6        6 March     2017 2017-03-30 00:00:00        1.71                 15
    ##  7        7 April     2017 2017-04-01 00:00:00        1.82                 15
    ##  8        8 April     2017 2017-04-20 00:00:00        2.37                 15
    ##  9        9 May       2017 2017-05-10 00:00:00        2.64                 15
    ## 10       10 May       2017 2017-05-26 00:00:00        2.78                 15
    ## # ℹ 84 more rows
    ## # ℹ 7 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, grocery_bags <dbl>,
    ## #   chip_bags <dbl>, homes_powered <dbl>

``` r
gwynnda_df =
  read_excel(
    "data/trashwheel.xlsx",
    sheet = 4,
    range = "A2:K108") |>
  janitor::clean_names() |>
  mutate(homes_powered = weight_tons * 500 / 30)

gwynnda_df
```

    ## # A tibble: 106 × 11
    ##    dumpster month   year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>  <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 July    2021 2021-07-03 00:00:00        0.93                 15
    ##  2        2 July    2021 2021-07-07 00:00:00        2.26                 15
    ##  3        3 July    2021 2021-07-07 00:00:00        1.62                 15
    ##  4        4 July    2021 2021-07-16 00:00:00        1.76                 15
    ##  5        5 July    2021 2021-07-30 00:00:00        1.53                 15
    ##  6        6 August  2021 2021-08-11 00:00:00        2.06                 15
    ##  7        7 August  2021 2021-08-14 00:00:00        1.9                  15
    ##  8        8 August  2021 2021-08-16 00:00:00        2.16                 15
    ##  9        9 August  2021 2021-08-16 00:00:00        2.6                  15
    ## 10       10 August  2021 2021-08-17 00:00:00        3.21                 15
    ## # ℹ 96 more rows
    ## # ℹ 5 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, plastic_bags <dbl>, homes_powered <dbl>

Combining 3 datasets:

``` r
mrtrashwheel_df =
  mutate(
    mrtrashwheel_df,
    trashwheel = "mr_trashwheel"
  ) |>
  relocate(trashwheel)

professor_df =
  mutate(
    professor_df,
    trashwheel = "professor_trashwheel"
  ) |>
  relocate(trashwheel)

gwynnda_df =
  mutate(
    gwynnda_df,
    trashwheel = "gwynnda"
  ) |>
  relocate(trashwheel)

trashwheels_df = 
  bind_rows(mrtrashwheel_df, professor_df, gwynnda_df)

trashwheels_df
```

    ## # A tibble: 747 × 16
    ##    trashwheel    dumpster month  year date                weight_tons
    ##    <chr>            <dbl> <chr> <dbl> <dttm>                    <dbl>
    ##  1 mr_trashwheel        1 May    2014 2014-05-16 00:00:00        4.31
    ##  2 mr_trashwheel        2 May    2014 2014-05-16 00:00:00        2.74
    ##  3 mr_trashwheel        3 May    2014 2014-05-16 00:00:00        3.45
    ##  4 mr_trashwheel        4 May    2014 2014-05-17 00:00:00        3.1 
    ##  5 mr_trashwheel        5 May    2014 2014-05-17 00:00:00        4.06
    ##  6 mr_trashwheel        6 May    2014 2014-05-20 00:00:00        2.71
    ##  7 mr_trashwheel        7 May    2014 2014-05-21 00:00:00        1.91
    ##  8 mr_trashwheel        8 May    2014 2014-05-28 00:00:00        3.7 
    ##  9 mr_trashwheel        9 June   2014 2014-06-05 00:00:00        2.52
    ## 10 mr_trashwheel       10 June   2014 2014-06-11 00:00:00        3.76
    ## # ℹ 737 more rows
    ## # ℹ 10 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   grocery_bags <dbl>, chip_bags <dbl>, sports_balls <dbl>,
    ## #   homes_powered <dbl>, plastic_bags <dbl>

### Dataset Description:

In total, Mr. Trash Wheel, Professor Trash Wheel, and Gwynnda collected
747 dumpsters of trash, each contributing 547, 94, and 106 dumpsters,
respectively. The dataset includes basic information of trash collected
such as dumpster number, date, weight, and volume, as well as more
detailed information regarding the composition of trash being collected
like number of plastic bottles, cigarette butts, etc. Professor Trash
Wheel collected a total of 190.12 tons of trash. In July of 2021,
Gwynnda collected a total of 16300 cigarette butts.
